<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>산책할개</title>

   <!-- Bootstrap Core CSS -->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link href="../bower_components/css/agency.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> 

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<style>



#logout {
  margin-right: 5px;
}
#container1 {
  padding-top: 140px;
  padding-bottom: 110px;
  margin-left: auto;
  margin-right: auto;
  width: 1100px;
}

#change-acc {
  text-align: right;
}

#change-acc-btn {
  margin-bottom: -40px;
  
}
#deletediv {
  text-align: right;
}
#delete {
  margin-bottom: -50px;
}
#change-acc-btn:hover {
  transition-property: background-color, color;
  transition-duration: 0.01s;
  transition-timing-function: ease-out;
  background-color:#5bc0de;
  color:white;
}

#save {
  text-align: right;
}
#savebtn {
  width: 100px;
}
.table {
  text-align: left;
}
.input-group1 {
  display: inline-block;
  width: 100px;
}

.input-group2 {
  display: inline-block;
  width: 300px;
}

.table-responsive {
  margin-left: auto;
  margin-right: auto;
  width: 1100px;
}

#changeAc {
  float: right;
}

hr {
  border: 1px solid lightgray;
}

.dropdown {
  display: inline;
}
#grade2 {
  display: none;
}

.form-control {
  display: inline-block;
}


.btn-me {
  color: #ffffff;
  background-color: #fed136;
  border-color: #fed136;
  font-family: "Montserrat", "Helvetica Neue", Helvetica, Arial, sans-serif;
  text-transform: uppercase;
  display: inline-block;
  padding: 6px 12px;
  margin-bottom: 0;
  font-size: 14px;
  font-weight: normal;
  line-height: 1.42857143;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  background-image: none;
  border: 1px solid transparent;
  border-radius: 4px;
}
.btn-me:hover,
.btn-me:focus,
.btn-me:active,
.btn-me.active,
.open .dropdown-toggle.btn-me {
  color: #ffffff;
  background-color: #fec503;
  border-color: #f6bf01;
}
.btn-me:active,
.btn-me.active,
.open .dropdown-toggle.btn-me {
  background-image: none;
}
.btn-me.disabled,
.btn-me[disabled],
fieldset[disabled] .btn-me,
.btn-me.disabled:hover,
.btn-me[disabled]:hover,
fieldset[disabled] .btn-me:hover,
.btn-me.disabled:focus,
.btn-me[disabled]:focus,
fieldset[disabled] .btn-me:focus,
.btn-me.disabled:active,
.btn-me[disabled]:active,
fieldset[disabled] .btn-me:active,
.btn-me.disabled.active,
.btn-me[disabled].active,
fieldset[disabled] .btn-me.active {
  background-color: #fed136;
  border-color: #fed136;
}
</style>
</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top"  style="background-color: black;">
        <div class="container" >
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a onclick="goMain(event)" class="navbar-brand page-scroll" href="#page-top"><img class='logoimg' src='../img/logos/dlogo.PNG'></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a id='logout' class="login" href="#">로그아웃</a>
                    </li>
                    <li>
                        <a id='resist' class="login" href="#">펫시터등록</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>



    <!-- Services Section -->
    <div id="inbody">
    <div id="container1">
      <div class="table-responsive table1">
      <div id="deletediv">
      <button id="delete" type="button" class="btn btn-me">회원탈퇴</button>
      </div>
        <table class="table table-bordered">
          <tr class="info">
            <th WIDTH="20%">회원정보</th>
          </tr>
          <tr>
            <td>프로필사진</td>
            <td id="propho">
              <div class="input-group col-lg-4">
                <input type="text" id="photo" class="form-control" readonly="readonly">
                <span class="input-group-btn">
                  <button id="picture"  class="btn btn-me" type="button">파일첨부</button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td>이름</td>
            <td id="nametd">
              <div class="input-group col-lg-4">
                <input type="text" id="name" class="form-control" readonly="readonly">
                <span class="input-group-btn">
                  <button id="changeName"  class="btn btn-me" type="button">이름변경</button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td>이메일</td>
            <td id="emailtd">
              <div class="input-group col-lg-4">
                <input type="text" id="email" class="form-control" readonly="readonly">
                <span class="input-group-btn">
                   <button id="emailrequest"  class="btn btn-me" type="button">인증하기</button>
                </span>
              </div>
            </td>
          </tr>
         <tr>
            <td>연락처</td>
            <td>휴대폰번호
              <div class="dropdown">
                <button id="dLabel"  class="btn btn-default dropdown-toggle"
                  data-target="#" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  SKT <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dLabel">
                  <li role="presentation"><a role="menuitem" tabindex="-1" href="#">KT</a></li>
                  <li><a href="#">LG U+</a></li>
                </ul>
              </div>

              <div class=" input-group1">
                <input type="text" class="form-control" value="010" id="phone1">
              </div>-
              <div class=" input-group1">
                <input type="text" class="form-control" value="5446" id="phone2">
              </div>-
              <div class=" input-group1">
                <input type="text" class="form-control" value="8470" id="phone3">
              </div>
              <button type="button" class="btn btn-me">인증하기</button>
            </td>
          </tr>
          <tr>
            <td>현재 비밀번호</td>
            <td>
              <div class="input-group col-lg-3">
                <input type="password" id="nowpassword" class="form-control" placeholder="바뀌는경우만입력">
              </div>
            </td>
          </tr>
          <tr>
            <td>비밀번호 변경</td>
            <td>
              <div class="input-group col-lg-3">
                <input type="password" id="password" class="form-control" placeholder="바뀌는경우만입력">
              </div>
            </td>
          </tr>
          <tr>
            <td>비밀번호 확인</td>
            <td>
             <div class="input-group col-lg-3">
                <input type="password" id="passwordchk" class="form-control" placeholder="바뀌는경우만입력" >
                <span id="checkText"></span>
              </div>
              
            </td>
          </tr>
        </table>
      </div>

      <br>
      <div id="grade2">
      <div class="table-responsive">
        <table class="table table-bordered">
          <tr class="info">
            <th WIDTH="20%">개인정보</th>
          </tr>
          <tr>
            <td>주소</td>
            <td><div class="input-group1 input-group">
                <input type="text" class="form-control"
                  aria-describedby="basic-addon1">
              </div>
              <button type="button" class="btn btn-default">우편번호 찾기</button></td>
          </tr>
          <tr>
            <td>상세주소</td>
            <td><div class="input-group2 input-group">
                <input type="text" class="form-control"
                  aria-describedby="basic-addon1">
              </div>
              <div class="input-group2 input-group">
                <input type="text" class="form-control"
                  aria-describedby="basic-addon1">
              </div></td>
          </tr>
        </table>
      </div>
      <br>
        <div id="change-acc">
          <button id="change-acc-btn" type="button" class='btn btn-me'>계좌변경</button>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr class="info">
              <th WIDTH="20%">계좌 정보</th>
            </tr>
            <tr>
              <td>은행명</td>
              <td id="bank">비트은행</td>
            </tr>
            <tr>
              <td>계좌번호</td>
              <td id="account">123456789</td>
            </tr>
            <tr>
              <td>예금주</td>
              <td id="holder">엄진영</td>
            </tr>
          </table>
        </div>
      </div>
      <div id="save">
          <button type="button" id="savebtn" class="btn btn-me">저장</button>
      </div>
    </div>
  </div>
  <div id="dialog-confirm" title="회원 탈퇴 확인">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>정말로 회원 탈퇴하시겠습니까?<br>데이터가 복구되지 않습니다.</p>
  </div>
  <div id="dialog-confirm2" title="회원 정보 변경 성공">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>회원 정보를 변경하였습니다</p>
  </div>
  <div id="dialog-confirm3" title="회원 정보 변경 성공">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>회원 정보를 변경하지못했습니다</p>
  </div>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <span class="copyright">Copyright &copy; 산책할개 2016</span>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline social-buttons">
                        <li><a href="#"><i class="fa fa-twitter"></i></a>
                        </li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a>
                        </li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline quicklinks">
                        <li><a href="#">Privacy Policy</a>
                        </li>
                        <li><a href="#">Terms of Use</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    

  <script type="text/javascript">
  var memberNo = 0;  
  $(function() {
      $.ajax("../auth/getMemberNo.do?", {
        method : "POST",
        async : false,
        success : function(result) {
          if (result.status == "success") {
            memberNo = result.mno;
          }
        }
      });
    })
  
  $("#passwordchk").change(function() {
     if ($("#password").val() != $("#passwordchk").val() ) {
       $("#checkText").html("비밀번호가 일치하지 않습니다.")
       $("#checkText").css("color","red");
     } else {
       $("#checkText").html("비밀번호가 일치합니다.")
       $("#checkText").css("color","green");
     }
  });
  
  $("#delete").click(function() {
    $( "#dialog-confirm" ).dialog({
       resizable: false,
       height:200,
       width:300,
       modal: true,
       buttons: {
         "확인": function() {
           $( this ).dialog( "close" );
           $(function() {
              $.ajax("../ajax/member/delete.do?", {
                  method : "POST",
                  dataType : "json",
                  data : {
                   no : memberNo
                 }, 
                 success :function(result) {

                }
              });
           });
           location.href = "../main/index.html";
         },
         "취소": function() {
           $( this ).dialog( "close" );
         }
       }
    })
  });
  
   $("#savebtn").click(function() {
       var pwd = "";
       if($("#password").val()) {
         if( $("#password").val() == $("#passwordchk").val())
           pwd = $("#password").val();
       }
       $.ajax("../ajax/member/update.do?", {
           method : "POST",
           dataType : "json",
           data : {
            no : memberNo, //수정해야함
            gra: 1, // 수정해야함
            name : $("#name").val(),
            password : pwd,
            tel : $("#phone1").val()+"-"+
                  $("#phone2").val()+"-"+
                  $("#phone3").val()
          }, 
          success : function(result) {
            if (result.status == "success") {
              $(function() {
                  $( "#dialog-confirm2" ).dialog({
                    resizable: false,
                    height:180,
                    width:300,
                    modal: true,
                    buttons: {
                      "확인": function() {
                        $( this ).dialog( "close" );
                        location.href = "../main/index.html";
                      }
                    }
                  });
                });
              
            } else {
              $(function() {
                 $( "#dialog-confirm3" ).dialog({
                   resizable: false,
                   height:180,
                   width:300,
                   modal: true,
                   buttons: {
                     "확인": function() {
                       $( this ).dialog( "close" );
                     }
                   }
                 });
               });
            }
          },
          error : function() {
            window.alert("서버요청 실패입니다.");
          }
       })
      });
  
    $(function() {
    	if (memberNo == 0) {
    		 location.href = "../main/index.html";
    	} else {
	    	$.getJSON("../ajax/member/detail.do?no="+memberNo,
            function(result) {
            	$("#photo").val(result.prof);
              $("#name").attr("value",result.name);
              $("#email").attr("value",result.email);
              var phoneNum = result.tel.split('-');
              $("#phone1").val(phoneNum[0]);
              $("#phone2").val(phoneNum[1]);
              $("#phone3").val(phoneNum[2]);
            }
         );
    	}
    });

    function goMain(event) {
      location.href = "../main/index.html"
      event.preventDefault();
    }

    $(document).ready(function() {
      $("#dialog-confirm").css("display","none");
      $("#dialog-confirm2").css("display","none");
      $("#dialog-confirm3").css("display","none");
      $("#changeName").click(function() {
        if($("#name").attr("readonly")) {
         $("#name").removeAttr("readonly");
        } else {
          $("#name").attr("readonly","readonly");
        }
       });
      $("#resist").click( function() {
        location.href = "../resist/resist.html?no="+ memberNo;
        event.preventDefault();
      });
    });
  </script>
</body>
</html>
