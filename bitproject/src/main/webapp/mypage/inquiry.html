<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">

<title>산책할개</title>

<!-- Bootstrap Core CSS -->
<link href="../bower_components/bootstrap/dist/css/bootstrap.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">


<!-- Custom CSS -->
<link href="../bower_components/css/agency.css" rel="stylesheet">

<!-- Custom Fonts -->
<link href="../bower_components/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Kaushan+Script'
	rel='stylesheet' type='text/css'>
<link
	href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic'
	rel='stylesheet' type='text/css'>
<link
	href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700'
	rel='stylesheet' type='text/css'>

<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script
	src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<!-- jQuery Dialog -->
<link rel="stylesheet"
	href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<!-- check login -->
<script type="text/javascript" src="../LoginCheck.js"></script>
<!-- Daum map API -->
<script
	src="http://apis.daum.net/maps/maps3.js?apikey=7ae134637aef8f4bb01892e30a801547&libraries=services"></script>
<style>
#container2 {
	padding-bottom: 110px;
	margin-left: auto;
	margin-right: auto;
	width: 1100px;
}

ul.tabs {
	margin: 0;
	padding: 0;
	float: left;
	list-style: none;
	height: 32px;
	border-bottom: 1px solid #eee;
	border-left: 1px solid #eee;
	width: 100%;
	font-family: "dotum";
	font-size: 15px;
}

ul.tabs li {
	float: left;
	text-align: center;
	cursor: pointer;
	width: 110px;
	height: 31px;
	line-height: 31px;
	border: 1px solid #eee;
	border-left: none;
	font-weight: bold;
	background: #fafafa;
	overflow: hidden;
	position: relative;
}

ul.tabs li.active {
	background: #fec503;
	border-bottom: 1px solid #fec503;
}

.tab_container {
	border-top: none;
	clear: both;
	float: left;
	width: 248px;
	background: #FFFFFF;
}

.tab_content {
	padding: 5px 0 5px 0;
	font-size: 12px;
	display: none;
}

.tab_container .tab_content ul {
	width: 100%;
	margin: 0px;
	padding: 0px;
}

.tab_container .tab_content ul li {
	padding: 5px;
	list-style: none;
}

.table {
	text-align: center;
}

.table-responsive {
	margin-left: auto;
	margin-right: auto;
	width: 1100px;
}

.form-control {
	display: inline-block;
}

#loading-image {
	position: relative;
	top: 400px;
	right: auto;
	z-index: 100px;
}
thead {
  font-size: 18px;
	font-weight: bold;
	background-color: #f0ffff;
}
td {
	font-size: 17px;
  vertical-align: middle;
}
tbody tr{
  height : 40px;
  text-align: center ;
}
tbody tr:hover {
	cursor: pointer;
	background-color: #fed100;
}
</style>
</head>


<body id="page-top" class="index">

	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-fixed-top"
		style="background-color: black;">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header page-scroll">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a onclick="goMain(event)" class="navbar-brand page-scroll"
					href="#page-top"><img class='logoimg'
					src='../img/logos/dlogo.PNG'></a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">
					<li><a id='logout' class="login" href="#">로그아웃</a></li>
					<li><a id='resist' class="login grade1" href="#">도그워커 등록</a></li>
					<li><a id='deleteresist' class="login grade2" href="#">도그워커
							삭제</a></li>
					<li><a id='mypage' class="login" href="#">신청조회</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<section>
		<div id="container2">
			<ul class="tabs">
				<li class="active info" rel="tab1">신청내역</li>
				<li rel="tab2">받은신청내역</li>
				<!--  <li rel="tab3">공지사항</li> -->
			</ul>
			<div class="tab_container">
				<div id="tab1" class="tab_content">
					<div class="table-responsive table1">
						<table class="table ">
							<thead>
								<tr>
									<td WIDTH="15%">주 문 번 호</td>
									<td WIDTH="30%">도그워커 닉네임</td>
									<td WIDTH="22%">요 청 날 짜</td>
									<td WIDTH="8%">수락 / 거부</td>
								</tr>
							</thead>
							<tbody id="send"></tbody>
						</table>
					</div>
				</div>
				<!-- #tab1 -->
				<div id="tab2" class="tab_content">
					<div class="grade2">
						<div class="table-responsive">
							<table class="table ">
								<thead>
									<tr>
										<td WIDTH="15%">주 문 번 호</td>
										<td WIDTH="30%">신  청  인</td>
										<td WIDTH="22%">요 청 날 짜</td>
										<td WIDTH="8%">수락 / 거부</td>
									</tr>
								</thead>
								<tbody id="receive"></tbody>
							</table>
						</div>
					</div>
				</div>
				<!-- #tab2 -->
				<!-- <div id="tab3" class="tab_content">3333Halo: Reach is the culmination of the superlative combat, sensational multiplayer, and seamless online integration that are the hallmarks of this superb series.</div> -->
				<!-- #tab3 -->
			</div>
			<!-- .tab_container -->
		</div>
		<!-- #container -->
	</section>
	<section>
		<!-- 간격을 벌리기 위한 추가 섹션 -->
	</section>
	<section>
    <!-- 간격을 벌리기 위한 추가 섹션 -->
  </section>
	<footer class="bg-light-gray">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<span class="copyright">Copyright &copy; 산책할개 2016</span>
				</div>
				<div class="col-md-4">
					<ul class="list-inline social-buttons">
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-linkedin"></i></a></li>
					</ul>
				</div>
				<div class="col-md-4">
					<ul class="list-inline quicklinks">
						<li><a href="#">Privacy Policy</a></li>
						<li><a href="#">Terms of Use</a></li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
	<!-- 알림상세 -->
	<div id='inex1' class='container' style="display: none;">
		<h3>신청-상세정보</h3>
		제공인 : <strong id="petname"></strong>
		전화번호 : <strong id="pettel"></strong>
		카카오톡 : <strong id="pettalk"></strong>
		<div >
			신청날짜 : <strong id='date1'></strong>
		</div>
<hr>
		<div >관련 지침및 요청 사항</div>
		<div >
			<strong id="conts1"></strong>
		</div>
		<div >
			<div class="question">
				Q. 반려동물을 기관에 등록하였습니까? <strong id='answer1-1'></strong>
			</div>
			<div class="question">
				Q. 중성화 수술을 하였습니까? <strong id='answer1-2'></strong>
			</div>
			<div class="question">
				Q. 다른 동물과 친화적입니까? <strong id='answer1-3'></strong>
			</div>
			<div class="question">
				Q. 어린이나 사람과 친화적입니까? <strong id='answer1-4'></strong>
			</div>
			<div class="question">
				Q. 잘 짖습니까? <strong id='answer1-5'></strong>
			</div>
			<div class="question">
				Q. 지병을 갖고있습니까? <strong id='answer1-6'></strong>
			</div>
			<div class="question">
				Q. 식사시간이 정해져 있다면 알려주세요? <strong id='answer1-7'></strong>
			</div>
			<div class="question">
				Q. 훈련이 되어있다면 알려주세요 <strong id='answer1-8'></strong>
			</div>
		</div>
	</div>
	  <!-- 알림상세 -->
  <div id='inex2' class='container' style="display: none;">
    <h3>신청-상세정보</h3>
    신청인 : <strong id="reqname"></strong>
    전화번호 : <strong id="reqtel"></strong>
    <div >
      신청날짜 : <strong id='date2'></strong>
    </div>
    <hr>
    <div >관련 지침및 요청 사항</div>
    <div >
      <strong id="conts2"></strong>
    </div>
    <div >
      <div class="question">
        Q. 반려동물을 기관에 등록하였습니까? <strong id='answer2-1'></strong>
      </div>
      <div class="question">
        Q. 중성화 수술을 하였습니까? <strong id='answer2-2'></strong>
      </div>
      <div class="question">
        Q. 다른 동물과 친화적입니까? <strong id='answer2-3'></strong>
      </div>
      <div class="question">
        Q. 어린이나 사람과 친화적입니까? <strong id='answer2-4'></strong>
      </div>
      <div class="question">
        Q. 잘 짖습니까? <strong id='answer2-5'></strong>
      </div>
      <div class="question">
        Q. 지병을 갖고있습니까? <strong id='answer2-6'></strong>
      </div>
      <div class="question">
        Q. 식사시간이 정해져 있다면 알려주세요? <strong id='answer2-7'></strong>
      </div>
      <div class="question">
        Q. 훈련이 되어있다면 알려주세요 <strong id='answer2-8'></strong>
      </div>
    </div>
  </div>
	<!-- Bootstrap Core JavaScript -->
	<script src="../bower_components/bootstrap/dist/js/bootstrap.js"></script>
	<!-- Plugin JavaScript -->
	<script
		src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
	<script src="../bower_components/js/classie.js"></script>
	<script src="../bower_components/js/cbpAnimatedHeader.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="../bower_components/js/agency.js"></script>
	<!-- Delete Petsitter resist delete-->
	<script src="../bower_components/js/mypage/mypageDeleteResist.js"></script>
	<!-- Login check -->
	<script src="../bower_components/js/checkLogin.js"></script>
	<script src="../bower_components/handlebars/handlebars.min.js"></script>
	<script id="temp1" type="text/x-handlebars-template">
{{#each list}}
<tr class="myrequestdetail">
  <td data-no="{{req}}">{{req}}</td>
  <td data-no="{{req}}">{{nick}}</td>
  <td data-no="{{req}}">{{date}}</td>
  <td data-no="{{req}}">{{stat}}</td>
</tr>
{{/each}}
  </script>
	<script id="temp2" type="text/x-handlebars-template">
{{#each list}}
<tr class="getrequestdetail">
  <td data-no="{{req}}">{{req}}</td>
  <td data-no="{{req}}">{{name}}</td>
  <td data-no="{{req}}">{{date}}</td>
  <td data-no="{{req}}">{{stat}}</td>
</tr>
{{/each}}
	</script>
	<!-- <td><a href="#" onclick="onclickDetail(event)" data-no="{{req}}">{{name}}</a></td> -->
	<script type="text/javascript">
		$(window).load(function() {
			$('#loading').hide();
		});
		function goMain(event) {
			location.href = "../main/index.html"
			event.preventDefault();
		}
		$(document).ready(function() {
    $.getJSON("../ajax/request/myrequestlist.do", function(result) {
        var templateData = $('#temp1').html();
        var template = Handlebars.compile(templateData);
        var html = template(result);
        $("#send").append(html);
        $(".myrequestdetail").on("click", function() {
        	var req = event.target.getAttribute("data-no");
        	  $.getJSON("../ajax/request/detail.do?req="
        		      + req, function(result) {
        		    $("#petname").html(result.pname+ "<br>");
        		    $("#pettel").html(result.request.p_tel+ "<br>");
        		    $("#pettalk").html(result.request.ktalk+ "<br>");
        		    $("#date1").html(result.request.date + "<br>");
        		    $("#conts1").html(result.request.conts);
        		    $("#answer1-1").html("<br>" + result.request.res);
        		    $("#answer1-2").html("<br>" + result.request.neut);
        		    $("#answer1-3").html("<br>" + result.request.anifd);
        		    $("#answer1-4").html("<br>" + result.request.manfd);
        		    $("#answer1-5").html("<br>" + result.request.bark);
        		    $("#answer1-6").html("<br>" + result.request.diz);
        		    $("#answer1-7").html("<br>" + result.request.meal);
        		    $("#answer1-8").html("<br>" + result.request.train);
        		    if (result.request.stat == "대기") {
        		      $("#inex1").dialog({
        		        resizable : false,
        		        height : 600,
        		        width : 500,
        		        modal : true,
        		        buttons : {
        		          "취소" : function() {
        		            $.ajax("../ajax/request/delete.do", {
        		              method : "POST",
        		              dataType : "json",
        		              data : {
        		                req : req
        		              },
        		              success : function(result) {
        		                if (result.status == "success") {
        		                  location.href = "inquiry.html";
        		                } else {
        		                  window.alert("변경 실패입니다!");
        		                }
        		              },
        		              error : function() {
        		                window.alert("서버 요청 실패입니다!");
        		              }
        		            });
        		            $(this).dialog("close");
        		          },
        		          "확인" : function() {
        		            $(this).dialog("close");
        		          }
        		        }
        		      }).parents(".ui-dialog").find(".ui-dialog-titlebar").remove();
        		    } else {
        		      $("#inex1").dialog({
        		        resizable : false,
        		        height : 600,
        		        width : 500,
        		        modal : true,
        		        buttons : {
        		          "확인" : function() {
        		            $(this).dialog("close");
        		          }
        		        }
        		      }).parents(".ui-dialog").find(".ui-dialog-titlebar").remove();
        		    }
        		  });
     	  })
      });
	  $.getJSON("../ajax/request/petrequestlist.do", function(result) {
		    var templateData = $('#temp2').html();
		    var template = Handlebars.compile(templateData);
		    var html = template(result);
		    $("#receive").append(html);
		    $(".getrequestdetail").on("click", function() {
		         var req = event.target.getAttribute("data-no");
            $.getJSON("../ajax/request/detail.do?req="
                  + req, function(result) {
                $("#reqname").html(result.mname+ "<br>");
                $("#reqtel").html(result.request.m_tel+ "<br>");
                $("#date2").html(result.request.date + "<br>");
                $("#conts2").html(result.request.conts);
                $("#answer2-1").html("<br>" + result.request.res);
                $("#answer2-2").html("<br>" + result.request.neut);
                $("#answer2-3").html("<br>" + result.request.anifd);
                $("#answer2-4").html("<br>" + result.request.manfd);
                $("#answer2-5").html("<br>" + result.request.bark);
                $("#answer2-6").html("<br>" + result.request.diz);
                $("#answer2-7").html("<br>" + result.request.meal);
                $("#answer2-8").html("<br>" + result.request.train);
                    $("#inex2").dialog({
                      resizable : false,
                      height : 600,
                      width : 500,
                      modal : true,
                      buttons : {
                        "수락" : function() {
                          $.ajax("../ajax/request/update.do", {
                            method : "POST",
                            dataType : "json",
                            data : {
                              req :req,
                              stat : "수락"
                            },
                            success : function(result) {
                              if (result.status == "success") {
                                location.href = "../main/index.html";
                              } else {
                                window.alert("변경 실패입니다!");
                              }
                            },
                            error : function() {
                              window.alert("서버 요청 실패입니다!");
                            }
                          });
                          $(this).dialog("close");
                        },
                        "거절" : function() {
                          $.ajax("../ajax/request/update.do", {
                            method : "POST",
                            dataType : "json",
                            data : {
                              req : req,
                              stat : "거절"
                            },
                            success : function(result) {
                              if (result.status == "success") {
                                location.href = "../main/index.html";
                              } else {
                                window.alert("거절 실패입니다!");
                              }
                            },
                            error : function() {
                              window.alert("서버 요청 실패입니다!");
                            }
                          });
                          $(this).dialog("close");
                        },
                        "목록" : function() {
                          $(this).dialog("close");
                        }
                      }
                    }).parents(".ui-dialog").find(".ui-dialog-titlebar").remove();
              });
	        })
		  });
	  
			$("#logout").click(function() {
				location.href = "../auth/logout.do";
				event.preventDefault();
			});
			$("#mypage").click(function() {
				location.href = "mypage3.html";
				event.preventDefault();
			});
			$("#resist").click(function(event) {
				location.href = "../resist/resist.html";
				event.preventDefault();
			});
			// 탭 메뉴바 설정
		    $(".tab_content").hide();
		    $(".tab_content:first").show();

		    $("ul.tabs li").click(function () {
		        $("ul.tabs li").removeClass("active").css("color", "#333");
		        //$(this).addClass("active").css({"color": "darkred","font-weight": "bolder"});
		        $(this).addClass("active").css("color", "#fff");
		        $(".tab_content").hide()
		        var activeTab = $(this).attr("rel");
		        $("#" + activeTab).fadeIn()
		    });
		    //------------
		    //멤버의 등급 가져오기
		      $.getJSON("../ajax/member/detail.do?", function(result) {
		          if (result.gra == 2) {
		            $(".grade2").css("display", "");
		            $(".grade1").css("display", "none");
		          } else {
		            $(".grade1").css("display", "");
		            $(".grade2").css("display", "none");
		          }
		        });
		    ///------------
		});
	</script>
</body>
</html>
