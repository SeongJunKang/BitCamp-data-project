<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>산책할개</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link rel="stylesheet"	href="../bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet"	href="../bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="../headerStyle.css">
<link rel="stylesheet" type="text/css" href="../footerStyle.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<style>
body {
	margin-left: 20px;
	margin-right: 20px;
}

#inbody {
	background-color: #f7f7f7;
}
#logout {
  margin-right: 5px;
}
#container {
	padding-top: 140px;
	padding-bottom: 110px;
	margin-left: auto;
	margin-right: auto;
	width: 1100px;
}

#change-acc {
	text-align: right;
}

#change-acc-btn {
	margin-bottom: -40px;
	
}
#deletediv {
  text-align: right;
}
#delete {
  margin-bottom: -50px;
}
#change-acc-btn:hover {
  transition-property: background-color, color;
  transition-duration: 0.01s;
  transition-timing-function: ease-out;
  background-color:#5bc0de;
  color:white;
}

#save {
  text-align: right;
}
#savebtn {
  width: 100px;
}
.table {
  text-align: left;
}
.input-group1 {
	display: inline-block;
	width: 100px;
}

.input-group2 {
	display: inline-block;
	width: 300px;
}

.table-responsive {
	margin-left: auto;
	margin-right: auto;
	width: 1100px;
}

#changeAc {
	float: right;
}

hr {
	border: 1px solid lightgray;
}

.dropdown {
	display: inline;
}
#grade2 {
  display: none;
}

.form-control {
  display: inline-block;
}

</style>

</head>
<body>
	<div id="inbody">
		<div id="topbanner">
			<div id="topbar">
				<p id="topbar_logo">
					<a href="#" onclick="goMain(event)"><img class="logo"
						src="../img/로고.PNG"></a>
				</p>
				<p id="topbar_button">
					<button id="resist" type="button" class="btn btn-default">펫시터등록</button>
					<button id="logout" type="button" onclick="goMain()" class="btn btn-default">로그아웃</button>
				</p>
			</div>
		</div>
		<div id="container">
			<div class="table-responsive table1">
			<div id="deletediv">
			<button id="delete" type="button" class="btn btn-default">회원탈퇴</button>
			</div>
				<table class="table table-bordered">
					<tr class="info">
						<th WIDTH="20%">회원정보</th>
					</tr>
					<tr>
						<td>이름</td>
						<td id="nametd">
					    <div class="input-group col-lg-4">
					      <input type="text" id="name" class="form-control" readonly="readonly">
					      <span class="input-group-btn">
					        <button class="btn btn-default" id="changeName"  class="btn btn-default" type="button">이름변경</button>
					      </span>
					    </div>
						</td>
					</tr>
					<tr>
						<td>이메일</td>
						<td id="emailtd">
						  <div class="input-group col-lg-4">
							  <input type="text" id="email" class="form-control" readonly="readonly">
	              <span class="input-group-btn">
	                 <button class="btn btn-default" id="emailrequest"  class="btn btn-default" type="button">인증하기</button>
	              </span>
              </div>
						</td>
					</tr>
         <tr>
            <td>연락처</td>
            <td>휴대폰번호
              <div class="dropdown">
                <button id="dLabel" class="btn btn-default dropdown-toggle"
                  data-target="#" data-toggle="dropdown" role="button'"
                  aria-haspopup="true" aria-expanded="false">
                  SKT <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dLabel">
                  <li><a href="#">KT</a></li>
                  <li><a href="#">LG U+</a></li>
                </ul>
              </div>

              <div class=" input-group1">
                <input type="text" class="form-control" value="010" id="phone1">
              </div>-
              <div class=" input-group1">
                <input type="text" class="form-control" value="5446" id="phone2">
              </div>-
              <div class=" input-group1">
                <input type="text" class="form-control" value="8470" id="phone3">
              </div>
              <button type="button" class="btn btn-default">인증하기</button>
            </td>
          </tr>
          <tr>
            <td>현재 비밀번호</td>
            <td>
              <div class="input-group col-lg-3">
                <input type="password" id="nowpassword" class="form-control" placeholder="바뀌는경우만입력">
              </div>
            </td>
          </tr>
					<tr>
						<td>비밀번호 변경</td>
						<td>
							<div class="input-group col-lg-3">
								<input type="password" id="password" class="form-control"	placeholder="바뀌는경우만입력">
					  	</div>
				  	</td>
					</tr>
					<tr>
						<td>비밀번호 확인</td>
						<td>
					 	 <div class="input-group col-lg-3">
								<input type="password" id="passwordchk" class="form-control" placeholder="바뀌는경우만입력" >
								<span id="checkText"></span>
							</div>
							
						</td>
					</tr>
				</table>
			</div>

			<br>
			<div id="grade2">
			<div class="table-responsive">
				<table class="table table-bordered">
					<tr class="info">
						<th WIDTH="20%">개인정보</th>
					</tr>
					<tr>
						<td>주소</td>
						<td><div class="input-group1 input-group">
								<input type="text" class="form-control"
									aria-describedby="basic-addon1">
							</div>
							<button type="button" class="btn btn-default">우편번호 찾기</button></td>
					</tr>
					<tr>
						<td>상세주소</td>
						<td><div class="input-group2 input-group">
								<input type="text" class="form-control"
									aria-describedby="basic-addon1">
							</div>
							<div class="input-group2 input-group">
								<input type="text" class="form-control"
									aria-describedby="basic-addon1">
							</div></td>
					</tr>
				</table>
			</div>
			<br>
				<div id="change-acc">
					<button id="change-acc-btn" type="button" class='btn btn-default'>계좌변경</button>
				</div>
				<div class="table-responsive">
					<table class="table table-bordered">
						<tr class="info">
							<th WIDTH="20%">계좌 정보</th>
						</tr>
						<tr>
							<td>은행명</td>
							<td id="bank">비트은행</td>
						</tr>
						<tr>
							<td>계좌번호</td>
							<td id="account">123456789</td>
						</tr>
						<tr>
							<td>예금주</td>
							<td id="holder">엄진영</td>
						</tr>
					</table>
				</div>
			</div>
			<div id="save">
					<button type="button" id="savebtn" class="btn btn-success">저장</button>
		  </div>
		</div>
	</div>
	<div id="dialog-confirm" title="회원 탈퇴 확인">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>정말로 회원 탈퇴하시겠습니까?<br>데이터가 복구되지 않습니다.</p>
  </div>
  <div id="dialog-confirm2" title="회원 정보 변경 성공">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>회원 정보를 변경하였습니다</p>
  </div>
  <div id="dialog-confirm3" title="회원 정보 변경 성공">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>회원 정보를 변경하지못했습니다</p>
  </div>
	<footer>

		<a href="#" onclick="goMain(event)"> <img class="logofooter"
			src="../img/로고.PNG"></a>

		<p id="copyright" class="footer">
			<br> 이 사이트의 모든 권한은 자바 80기에 있습니다.<br> 비트캠프 | 사업자등록번호: <span
				id="compno">214-85-24928</span> |(주)비트교육센터 서초지점 대표 조현정<br>
			전화번호: 02)3486-9600 | 팩스: 02)6007-1245 | 메일: bit@bitacademy.net <br>
			사업장 소재지 : 서울시 서초구 서초동 1327-15번지 비트아카데미 빌딩 3층
		</p>
	</footer>

	<script type="text/javascript">
	$("#passwordchk").change(function() {
		 if ($("#password").val() != $("#passwordchk").val() ) {
			 $("#checkText").html("비밀번호가 일치하지 않습니다.")
			 $("#checkText").css("color","red");
		 } else {
			 $("#checkText").html("비밀번호가 일치합니다.")
			 $("#checkText").css("color","green");
		 }
	});
	
	$("#delete").click(function() {
    $( "#dialog-confirm" ).dialog({
       resizable: false,
       height:200,
       width:300,
       modal: true,
       buttons: {
         "확인": function() {
           $( this ).dialog( "close" );
           $(function() {
              $.ajax("../ajax/member/delete.do?", {
                  method : "POST",
                  dataType : "json",
                  data : {
                   no : 3
                 }, 
                 success :function(result) {

                }
              });
           });
           location.href = "../main/maintest.html";
         },
         "취소": function() {
           $( this ).dialog( "close" );
         }
       }
    })
	});
	
	 $("#savebtn").click(function() {
		   var pwd = "";
		   if($("#password").val()) {
			   if( $("#password").val() == $("#passwordchk").val())
				   pwd = $("#password").val();
		   }
	     $.ajax("../ajax/member/update.do?", {
	         method : "POST",
	         dataType : "json",
	         data : {
	        	no : 1,
		        name : $("#name").val(),
		        password : pwd,
		        tel : $("#phone1").val()+"-"+
		              $("#phone2").val()+"-"+
		              $("#phone3").val()
          }, 
		      success : function(result) {
		        if (result.status == "success") {
	            $(function() {
	                $( "#dialog-confirm2" ).dialog({
	                  resizable: false,
	                  height:180,
	                  width:300,
	                  modal: true,
	                  buttons: {
	                    "확인": function() {
	                      $( this ).dialog( "close" );
	                      location.href = "../main/maintest.html";
	                    }
	                  }
	                });
	              });
		          
		        } else {
		        	$(function() {
                 $( "#dialog-confirm3" ).dialog({
                   resizable: false,
                   height:180,
                   width:300,
                   modal: true,
                   buttons: {
                     "확인": function() {
                       $( this ).dialog( "close" );
                     }
                   }
                 });
               });
		        }
		      },
		      error : function() {
		    	  window.alert("서버요청 실패입니다.");
		      }
	     })
	    });
	
		$(function() {
			$.ajax({
						url : "mypage.jsp",
						dataType : "json",
						success : function(result) {
							$("#name").attr("value",result.name);
							$("#bank").html(result.bank);
							$("#email").attr("value",result.email);
							$("#account").html(result.account);
							$("#holder").html(result.holder);
						}
					})

		});

		function goMain(event) {
			location.href = "../main/maintest.html"
			event.preventDefault();
		}

		$(document).ready(function() {
			$("#dialog-confirm").css("display","none");
			$("#dialog-confirm2").css("display","none");
			$("#dialog-confirm3").css("display","none");
      $("#changeName").click(function() {
    	  if($("#name").attr("readonly")) {
         $("#name").removeAttr("readonly");
    	  } else {
    		  $("#name").attr("readonly","readonly");
    	  }
       });
			$("#resist").click( function() {
				location.href = "../resist/resist.html"
				event.preventDefault();
			});
		});
	</script>
</body>
</html>











