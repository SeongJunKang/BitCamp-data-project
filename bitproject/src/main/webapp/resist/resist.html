<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
<link rel="stylesheet" type="text/css" href="../headerStyle.css">
<link rel="stylesheet" type="text/css" href="../footerStyle.css">
<link rel="stylesheet"   href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="http://apis.daum.net/maps/maps3.js?apikey=7ae134637aef8f4bb01892e30a801547&libraries=services"></script>
<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../bower_components/handlebars/handlebars.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
  
<title>산책하개</title>
<style type="text/css">

body {
	margin-left: 20px;
	margin-right: 20px;
}

#carousel-example-generic {
	width: 100%;6c  
	margin: 0 auto;
}

#inbody {
  background-color: #f7f7f7 ;
}

.imgmain {
	width: 100%;
	height: auto;
	margin-bottom: 50px;
}
#bodycontent {
	width: 1100px;
	margin: 0 auto;
}

#container {
	padding-bottom: 100px;
	padding-top: 50px;
}

table {
	width: 1100px;
	margin-top: 15px;
}

.th {
	vertical-align: middle;
	width: 20%;
}

.form-control {
	margin-left: 20px;
	display: inline-block;
	width: 20%;
}
.checkbox-inline {
  margin-left: 20px;
}
#checknick {
	margin-left: 10px;
}

.thtext {
	font-weight: bold;
	font-size: 18px; vertical-align : middle;
	margin-left: 20px;
	vertical-align: middle;
}
#price {
  margin-right: 10px;
}
#profileresist {
	font-weight: bold;
	font-size: 25px;
}
#intro {
  width:  auto;
}
#savediv {
  padding-top : 30px;
  text-align: center;
}
#savebtn {
  font-size: 25px;
  color : white;
  border: none;
  background: gray;
  width: 170px;
  height: 70px;
  border-radius : 14px;
}
#savebtn:hover {
  background: orange;
  color: black;
}
.th {
  color : white;
  background-color: #f7786b;
  opacity : 0.8;
}
#map {
  margin-left: auto;
  margin-right: auto;
  width:100%;
  height:400px;
}
#addr2 {
  width: 50%;
}
#inqur1,#inqur2,#addr1{
  margin-right: 10px;
}
#radiandiv {
  margin-left: 100px;
} 
#radian {
  margin-right: 10px;
}
#animal {
  margin-right: 5px;
}
</style>
</head>
<body>
	<div id="inbody">
		<div id="topbanner">
			<div id="topbar">
				<p id="topbar_logo">
					<a href="#" onclick="goMain(event)"><img class="logo"
						src="../img/로고.PNG"></a>
				</p>
        <p id="topbar_button">
          <button id="logout" onclick="goMain(event)" type="button" class="btn btn-default">로그아웃</button>
        </p>
			</div>
		</div>
		<div id="container">
			<div class="carousel-example-generic">
				<img class="imgmain" src="../img/back.jpg">
			</div>
			<div id="bodycontent">
			<form >
	 	    <input id="pno" type='hidden' name='no'>
 	    </form> 
				<span id="profileresist">펫시터 프로필 등록</span>
				<div>
					<table class="table table-bordered">
						<tr>
							<td class="th"><span class="thtext">닉네임</span></td>
							<td class="td"><input type="text" class="form-control"
								id="nickname">
								<button id="checknick" class="btn btn-default">중복확인</button></td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">1일 가격</span></td>
							<td class="td"><input type="text" class="form-control"
								id="price">원</td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">카톡 ID</span></td>
							<td class="td"><input type="text" class="form-control"
								id="kakao"></td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">은행</span></td>
							<td class="td"><input type="text" class="form-control"
								id="bank"></td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">예금주</span></td>
							<td class="td"><input type="text" class="form-control"
								id="holder"></td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">계좌</span></td>
							<td class="td"><input type="text" class="form-control"
								id="account"></td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">추가서비스</span></td>
							<td class="td">
								<label class="checkbox-inline">
							    <input type="checkbox" name="box" id="box1" value="간식 제공">간식 제공 
							  </label>
							  <label class="checkbox-inline">
							    <input type="checkbox" name="box" id="box2" value="픽업">픽업
							  </label>
							  <label class="checkbox-inline">
							    <input type="checkbox" name="box" id="box3" value="배변봉투 제공">배변봉투 제공 
							  </label>
							  <label class="checkbox-inline">
                  <input type="checkbox" name="box"  id="box4" value="목줄/리드줄 보유">  목줄/리드줄 보유
                </label>
							  <label class="checkbox-inline">
                  <input type="checkbox" name="box"  id="box5" value="강아지 물통 보유">  강아지 물통 보유
                </label>
							</td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">문의시간</span></td>
							<td class="td"><input type="text" class="form-control"
								id="inqur1">시 ~ <input type="text" class="form-control"
								id="inqur2">시</td>
						</tr>
						<tr>
							<td class="th"><span class="thtext">반려동물유무</span></td>
							<td class="td"><input type="number" class="form-control"
								id="animal"> 마리</td>
						</tr>
						<tr>
              <td class="th"><span class="thtext">우편번호</span></td>
              <td class="td"><input type="text" class="form-control" id="addr1"> <button type="button" class="btn btn-default">우편번호검색</button>
              </td>
            </tr>
            <tr>
              <td class="th"><span class="thtext">상세주소</span></td>
              <td class="td"><input type="text" class="form-control form-control2"
                id="addr2"></td>
            </tr>
						<tr>
							<td class="th" colspan="2"><span class="thtext">산책범위 지정하기</span></td>
						</tr>
						<tr>
							<td class="td" colspan="2">
							<div>
	 						  주소 : <input type="text" class="form-control" id="range">
               <button id="addrfind" class="btn btn-default">검색</button>
	 						  <span id="radiandiv">반경 : <input type="text" class="form-control" id="radian">M</span>
 						  </div>
							<div id="map"></div></td>
						</tr>
						<tr>
							<td class="th" colspan="2"><span class="thtext">반려동물을 잘 산책할 수 있다는 자기 소개를 적어주세요~</span></td>
						</tr>
						<tr>
							<td colspan="2"><textarea id="intro" class="form-control" cols="150"
									rows="6"></textarea></td>
					  </tr>
					</table>
				</div>
			</div>
			<div id="savediv">
			 <button type="button" id="savebtn">저장하기</button>
			</div>
		</div>
	</div>
	<footer>

		<a href="#" onclick="goMain(event)"> <img class="logofooter"
			src="../img/로고.PNG"></a>

		<p id="copyright" class="footer">
			<br> 이 사이트의 모든 권한은 자바 80기에 있습니다.<br> 비트캠프 | 사업자등록번호: <span
				id="compno">214-85-24928</span> |(주)비트교육센터 서초지점 대표 조현정<br>
			전화번호: 02)3486-9600 | 팩스: 02)6007-1245 | 메일: bit@bitacademy.net <br>
			사업장 소재지 : 서울시 서초구 서초동 1327-15번지 비트아카데미 빌딩 3층
		</p>
	</footer>
  <script>
  
  $("#savebtn").click(function() {
	  var no = location.href.split("=")[1];
	  $("#pno").val(no);
	  var checklist="";
      $("input[name=box]:checked").each(function() {
        checklist += $(this).val()+",";
      });
    checklist = checklist.substring(0,checklist.length-1);
    var radian = 0;
    if ($("#radian").val() != "") {
    	radian = $("#radian").val();
    }
      $.post("../ajax/petsitter/add.do", {
    	    pno : $("#pno").val(),
          nick : $("#nickname").val(),
          amt :$("#price").val(),        
          ktalk : $("#kakao").val(),
          bank : $("#bank").val(),
          bknm: $("#holder").val(),
          acc : $("#account").val(),
          ser : checklist,
          inqur : $("#inqur1").val() + "시 ~ "
                 +$("#inqur2").val()+ "시",
          pet :  $( "#animal").val(),
          addr_1 :$("#addr1").val(),
          addr_2 :$("#addr2").val(),
          rad :radian,
          lat :$("#addr2").val(),
          lnt :$("#addr2").val(),
          intro :$("#intro").val()
        }, function(result) {
          if (result.status == "success") {
            location.href = "../main/maintest.html";
          } else {
            window.alert("등록 실패입니다.");
          }
        }, "json");
      $.post("../ajax/member/update.do?", {
           no : $("#pno").val(),
           gra :  2   //수정해야함
         }, function(result) {
             if (result.status == "success") {
                location.href = "../main/maintest.html";
              } else {
                window.alert("등록 실패입니다.");
              }
            }, "json");
    });
  
  function goMain(event) {
    location.href = "../main/maintest.html"
    event.preventDefault();
  }

  $(document).ready(function() {
  //****************************************************************************
  // 다음 지도 API 키 :7ae134637aef8f4bb01892e30a801547
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
       mapOption = { 
         center: new daum.maps.LatLng(37.5196784,127.1201637,17), // 지도의 중심좌표
         level: 5 // 지도의 확대 레벨
       };

    // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    var map = new daum.maps.Map(mapContainer, mapOption); 
    var geocoder = new daum.maps.services.Geocoder();
    var zoomControl = new daum.maps.ZoomControl();
    map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
    var mapTypeControl = new daum.maps.MapTypeControl();
    map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);
  //****************************************************************************
  
  //****************************************************************************
  $("#radian").change(function(){
	    var circle = circle = new daum.maps.Circle({
	    center : new daum.maps.LatLng(37.5196784,127.1201637,17),  // 원의 중심좌표 입니다 
	    radius: $("#radian").val(), // 미터 단위의 원의 반지름입니다 
	    strokeWeight: 5, // 선의 두께입니다 
	    strokeColor: '#75B8FA', // 선의 색깔입니다
	    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
	    strokeStyle: 'solid', // 선의 스타일 입니다
	    fillColor: '#CFE7FF', // 채우기 색깔입니다
	    fillOpacity: 0.5  // 채우기 불투명도 입니다   
	  }); 
	  
	  // 지도에 원을 표시합니다 
	  circle.setMap(map); 
  })
  //****************************************************************************
  
   $("#addrfind").click(function() {
	   geocoder.addr2coord($("#range").val(), function(status, result) {

		    // 정상적으로 검색이 완료됐으면 
		     if (status === daum.maps.services.Status.OK) {

		        var coords = new daum.maps.LatLng(result.addr[0].lat, result.addr[0].lng);

		        // 결과값으로 받은 위치를 마커로 표시합니다
		        var marker = new daum.maps.Marker({
		            map: map,
		            position: coords
		        });

		        // 인포윈도우로 장소에 대한 설명을 표시합니다
		        var infowindow = new daum.maps.InfoWindow({
		            content: '<div style="width:150px;text-align:center;padding:6px 0;">우리회사</div>'
		        });
		        infowindow.open(map, marker);

		        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
		        map.setCenter(coords);
		    } 
		}); 
   })
  });
  </script>
</body>
</html>